# NAM_NEST PCPCombine Configurations
#
# /contrib/met/8.1_beta2/bin/pcp_combine -v 5 -name APCP -add nam_nest_2019092712_06.nc 6 nam_nest_2019092712_07.grib2 1 nam_nest_2019092712_07.nc

[config]
# Log level
LOG_LEVEL = NOTSET

# time looping - options are INIT, VALID, RETRO, and REALTIME
LOOP_BY = INIT 

# Format of INIT_BEG and INT_END
INIT_TIME_FMT = %Y%m%d%H

# Start time for METplus run
#VALID_BEG = 2019050500
INIT_BEG = {ENV[YYYYMMDDHH]}

# End time for METplus run
INIT_END = {ENV[YYYYMMDDHH]}

# Increment between METplus runs in seconds. Must be >= 60
INIT_INCREMENT=10800

# List of forecast leads to process
LEAD_SEQ = {ENV[FCSTLEN]}

# Options are times, processes
# times = run all items in the PROCESS_LIST for a single initialization
# time, then repeat until all times have been evaluated.
# processes = run each item in the PROCESS_LIST for all times
#   specified, then repeat for the next item in the PROCESS_LIST.
LOOP_ORDER = times

# List of applications to run
PROCESS_LIST = PcpCombine

# run pcp_combine on forecast data
FCST_PCP_COMBINE_RUN = true
#FCST_PCP_COMBINE_INPUT_LEVEL = 1 
#FCST_PCP_COMBINE_DATA_INTERVAL = 3
#FCST_PCP_COMBINE_DERIVE_LOOKBACK = 3
#FCST_PCP_COMBINE_TIMES_PER_FILE = 1
#FCST_PCP_COMBINE_MIN_FORECAST = 0
#FCST_PCP_COMBINE_MAX_FORECAST = {ENV[FCSTLEN]}

# method to run pcp_combine on forecast data
# Options are ADD, SUM, SUBTRACT, and DERIVE
FCST_PCP_COMBINE_METHOD = ADD

# list of variables to compare
#FCST_PCP_COMBINE_1_FIELD_NAME = APCP
FCST_VAR1_NAME = APCP
FCST_VAR1_LEVELS = A{ENV[FCSTLEN]}

# description of data to be processed
# used in output file path
#OBTYPE = STAGE4_GRIB

# Data type of forecast data read by pcp_combine
# valid options are GRIB, NETCDF, and GEMPAK
FCST_PCP_COMBINE_INPUT_DATATYPE = GRIB

# Set to true if forecast files are generated once per day
FCST_PCP_COMBINE_IS_DAILY_FILE = false

[dir]
# location of configuration files used by MET applications
MET_BASE = {ENV[MET_BASE]}
MET_INSTALL_DIR = {ENV[MET_DIR]}
CONFIG_DIR={ENV[CFGDIR]}

# input and output data directories for each application in PROCESS_LIST

INPUT_BASE = {ENV[REALTIMEDIR]}
OUTPUT_BASE = {ENV[REALTIMEDIR]}

FCST_PCP_COMBINE_INPUT_DIR = {ENV[REALTIMEDIR]}
FCST_PCP_COMBINE_OUTPUT_DIR = {ENV[REALTIMEDIR]}

TMP_DIR = {FCST_PCP_COMBINE_OUTPUT_DIR}/log

[filename_templates]
# format of filenames

# NAM_MEST Grib
FCST_PCP_COMBINE_INPUT_TEMPLATE = {init?fmt=%Y%m%d}-{init?fmt=%H}z/nam_nest_{init?fmt=%Y%m%d%H}_{lead?fmt=%HH}.grib2
FCST_PCP_COMBINE_OUTPUT_TEMPLATE = {init?fmt=%Y%m%d}-{init?fmt=%H}z/nam_nest_{init?fmt=%Y%m%d%H}_{lead?fmt=%HH}.nc

